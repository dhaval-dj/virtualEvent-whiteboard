(this.webpackJsonpchat=this.webpackJsonpchat||[]).push([[0],{169:function(e,t,a){e.exports=a(349)},174:function(e,t,a){},175:function(e,t,a){e.exports=a.p+"static/media/logo.5d5d9eef.svg"},176:function(e,t,a){},177:function(e,t,a){},269:function(e,t){},306:function(e,t){},341:function(e,t,a){},349:function(e,t,a){"use strict";a.r(t);var n=a(1),s=a.n(n),c=a(166),r=a.n(c),i=(a(174),a(37)),o=a(54),l=a(56),m=a(55),u=(a(175),a(176),a(168)),h=(a(177),a(167)),d=a.n(h),p=function(e){Object(l.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).state={error:null,isLoading:!0,messages:[]},n.handleError=function(e){console.error(e),n.setState({error:"Could not load chat."})},n.setupChatClient=function(e){n.client=e,n.client.getChannelByUniqueName(n.user.channel).then((function(e){return e})).catch((function(e){if(50300===e.body.code)return n.client.createChannel({uniqueName:n.user.channel,friendlyName:n.user.name,isPrivate:!0,attributes:{id:n.user.id,name:n.user.name}});n.handleError(e)})).then((function(e){return n.channel=e,n.channel.join().catch((function(){}))})).then((function(){n.setState({isLoading:!1}),n.channel.invite("HelpDesk").catch((function(e){return console.log(e)})),n.channel.getMessages().then(n.messagesLoaded),n.channel.on("messageAdded",n.messageAdded)})).catch(n.handleError)},n.twilioMessageToMessage=function(e){return console.log(e),{id:e.sid,text:e.body,user:e.attributes.user||{},timestamp:e.timestamp}},n.messagesLoaded=function(e){n.setState({messages:e.items.map(n.twilioMessageToMessage)}),n.scroll()},n.messageAdded=function(e){n.setState((function(t){return{messages:[].concat(Object(u.a)(t.messages),[n.twilioMessageToMessage(e)])}})),n.scroll()},n.sendMessage=function(e){n.message.current.value&&(n.channel.sendMessage(n.message.current.value,{user:n.user}),n.message.current.value="")},n.scroll=function(){console.log("scroll");var e=n.messageDiv.current.scrollHeight-n.messageDiv.current.clientHeight;n.messageDiv.current.scrollTop=e>0?e:0},n.user={channel:e.channel,id:e.user.id,name:e.user.name},n.message=s.a.createRef(),n.messageDiv=s.a.createRef(),n}return Object(o.a)(a,[{key:"componentDidMount",value:function(){fetch("https://twilio-chat-api-dot-virtualeventdemo.el.r.appspot.com/chat/token",{headers:{"Content-Type":"application/x-www-form-urlencoded"},method:"POST",body:"identity=".concat(encodeURIComponent(this.user.id))}).then((function(e){return e.json()})).then((function(e){return d.a.create(e.token)})).then(this.setupChatClient).catch(this.handleError)}},{key:"componentWillUnmount",value:function(){this.client.shutdown()}},{key:"render",value:function(){var e=this;return this.state.error?s.a.createElement("p",null,this.state.error):this.state.isLoading?s.a.createElement("p",{className:"centerX"},"Looking for Representative..."):s.a.createElement(s.a.Fragment,null,s.a.createElement("div",{className:"wrapper h-100"},s.a.createElement("section",{className:"chat-container"},s.a.createElement("div",{className:"chat-section"},s.a.createElement("div",{className:"chat-section__header"},s.a.createElement("div",{className:"chat-section__header__title"},"Helpdesk"),s.a.createElement("a",{href:"#",className:"chat-section__header__close"},s.a.createElement("i",{className:"icon-close"}))),s.a.createElement("div",{className:"chat-section__body",ref:this.messageDiv},this.state.messages.map((function(t){return s.a.createElement(s.a.Fragment,null,e.user.id==t.user.id&&s.a.createElement("div",{className:"chat-section__message chat-section__message--sent",key:t.id},s.a.createElement("span",{className:"chat-section__text"}," ",t.text," "),s.a.createElement("span",{className:"chat-section__profile"},s.a.createElement("img",{src:"assets/images/Profile-picture.png",alt:""})," ",t.user.name)),e.user.id!=t.user.id&&s.a.createElement("div",{className:"chat-section__message chat-section__message--received",key:t.id},s.a.createElement("span",{className:"chat-section__profile"},s.a.createElement("img",{src:"assets/images/chatbot.png",alt:""})),s.a.createElement("span",{className:"chat-section__text"}," ",t.text," ")))}))),s.a.createElement("div",{className:"chat-section__footer"},s.a.createElement("div",{className:"chat-section__form"},s.a.createElement("textarea",{ref:this.message,type:"text",className:"chat-section__input",placeholder:"Type a Message"}),s.a.createElement("button",{onClick:function(t){return e.sendMessage(t)},className:"chat-section__btn"},s.a.createElement("i",{className:"icon-send"}))))))))}}]),a}(n.Component),g=(a(341),function(e){Object(l.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(i.a)(this,a);for(var n=arguments.length,s=new Array(n),c=0;c<n;c++)s[c]=arguments[c];return(e=t.call.apply(t,[this].concat(s))).onStartChat=function(t){e.props.onStartChat&&e.props.onStartChat(t)},e}return Object(o.a)(a,[{key:"render",value:function(){var e=this;return s.a.createElement("div",{className:"wrapper h-100"},s.a.createElement("section",{className:"main-page"},s.a.createElement("div",{className:"main-page__inner"},s.a.createElement("a",{href:"#",className:"main-page__close"},s.a.createElement("i",{className:"icon-close"})),s.a.createElement("img",{className:"main-page__logo",src:"assets/images/logo.png",alt:""}),s.a.createElement("div",{className:"main-page__user"},s.a.createElement("img",{src:"assets/images/Profile-picture.png",alt:""}),s.a.createElement("h2",null,"HelpDesk"),s.a.createElement("p",null,"Online")),s.a.createElement("div",{className:"main-page__quote"},s.a.createElement("h3",null,"How may I help you!!"),s.a.createElement("button",{onClick:function(t){return e.onStartChat(t)},className:"btn btn-primary btn-block"},"Start Chat")))))}}]),a}(n.Component)),f=a(20),v=a.n(f);a(342),a(344),a(350),a(347);v.a.initializeApp({apiKey:"AIzaSyCegGYWCtucAOBWcjwfNFW5dPQ0w5IQhks",authDomain:"iesa2020-summit.firebaseapp.com",databaseURL:"https://iesa2020-summit.firebaseio.com",projectId:"iesa2020-summit",storageBucket:"iesa2020-summit.appspot.com",messagingSenderId:"64912747091",appId:"1:64912747091:web:807a139759b6b3d30f34a6",measurementId:"G-F49GYNY9RD"});var E=v.a.auth(),_=(v.a.firestore(),v.a.storage(),v.a.database(),v.a.database,function(e){Object(l.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(i.a)(this,a);for(var n=arguments.length,s=new Array(n),c=0;c<n;c++)s[c]=arguments[c];return(e=t.call.apply(t,[this].concat(s))).state={showChat:!1,user:null},e.onChatStart=function(){e.state.user&&e.setState({showChat:!0})},e}return Object(o.a)(a,[{key:"componentDidMount",value:function(){var e=this;E.onAuthStateChanged((function(t){t&&e.setState({user:{id:t.email,name:t.displayName}})}))}},{key:"render",value:function(){var e=this;return s.a.createElement(s.a.Fragment,null,0==this.state.showChat&&s.a.createElement(g,{onStartChat:function(t){return e.onChatStart()}}),1==this.state.showChat&&null!=this.state.user&&s.a.createElement(p,{channel:this.state.user.id,user:{id:this.state.user.id,name:this.state.user.name}}))}}]),a}(n.Component));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(s.a.createElement(s.a.StrictMode,null,s.a.createElement(_,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[169,1,2]]]);
//# sourceMappingURL=main.8a90cf23.chunk.js.map